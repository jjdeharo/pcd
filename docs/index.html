<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plantilla correctora digital ¬∑ Instruccions</title>
    <style>
      :root {
        --bg: #f5f8fc;
        --text: #1a2733;
        --muted: #607d8b;
        --border: #c5ccda;
        --code-bg: #eef2f7;
        --link: #376082;
        --btn-bg: #eceff4;
        --btn-text: #1a2733;
        --primary: #1976d2;
        --primary-text: #ffffff;
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0f1720;
          --text: #e6edf3;
          --muted: #8aa0ae;
          --border: #334155;
          --code-bg: #111827;
          --link: #7db7ff;
          --btn-bg: #1f2a37;
          --btn-text: #e6edf3;
          --primary: #539bf5;
          --primary-text: #0b1220;
        }
      }
      [data-theme="light"] {
        --bg: #f5f8fc;
        --text: #1a2733;
        --muted: #607d8b;
        --border: #c5ccda;
        --code-bg: #eef2f7;
        --link: #376082;
        --btn-bg: #eceff4;
        --btn-text: #1a2733;
        --primary: #1976d2;
        --primary-text: #ffffff;
      }
      [data-theme="dark"] {
        --bg: #0f1720;
        --text: #e6edf3;
        --muted: #8aa0ae;
        --border: #334155;
        --code-bg: #111827;
        --link: #7db7ff;
        --btn-bg: #1f2a37;
        --btn-text: #e6edf3;
        --primary: #539bf5;
        --primary-text: #0b1220;
      }
      body { font-family: Arial, sans-serif; line-height: 1.55; color: var(--text); background: var(--bg); margin: 0; }
      .wrap { max-width: 880px; margin: 0 auto; padding: 2rem 1.25rem 3rem; }
      h1 { margin: 0.2rem 0 0.75rem; font-size: 1.9rem; }
      h2 { margin-top: 1.6rem; font-size: 1.35rem; }
      h3 { margin-top: 1.2rem; font-size: 1.1rem; }
      p, li { font-size: 1rem; }
      code { background: var(--code-bg); padding: 0 0.25rem; border-radius: 4px; }
      .lang { display: none; }
      .lang.active { display: block; }
      .toolbar { display: flex; gap: 0.75rem; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
      .switch { display: flex; gap: 6px; align-items: center; }
      .theme { display: flex; gap: 6px; align-items: center; }
      .btn { background: var(--btn-bg); color: var(--btn-text); border: 1px solid var(--border); padding: 0.3rem 0.7rem; border-radius: 999px; font-size: 0.9rem; cursor: pointer; }
      .btn.active { background: var(--primary); color: var(--primary-text); border-color: var(--primary); }
      .app-footer { text-align: center; color: var(--muted); font-size: 0.95rem; margin: 2rem 0 1.5rem; }
      .app-footer a { color: var(--link); text-decoration: none; }
      .app-footer a:hover { text-decoration: underline; }
      .app-footer .lic-line { margin-top: 0.35rem; }
      .app-footer .docs-line { margin-top: 0.35rem; }
      .app-footer .app-name { font-weight: 600; }
      .app-footer img.cc { vertical-align: middle; height: 20px; margin-left: 6px; opacity: 0.9; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="toolbar">
        <div class="switch" aria-label="Language selector">
          <button class="btn" data-lang="ca">CA</button>
          <button class="btn" data-lang="es">ES</button>
        </div>
        <div class="theme" title="Tema/Theme">
          <button class="btn theme-btn" data-theme="auto">AUTO</button>
          <button class="btn theme-btn" data-theme="light">‚òÄÔ∏è</button>
          <button class="btn theme-btn" data-theme="dark">üåô</button>
        </div>
      </div>

      <header>
        <h1>Plantilla correctora digital (Google Sheets + Web)</h1>
        <p id="repo-link"></p>
      </header>

      <section class="lang active" id="lang-ca">
        <h2>Qu√® √©s?</h2>
        <p>Aquesta plantilla et permet recollir respostes d'ex√†mens tipus test des d'una p√†gina web i desar-les autom√†ticament a la teva Fulla de C√†lcul de Google.</p>
        <ul>
          <li>Enlla√ß per a l'alumnat (web app).</li>
          <li>Panell del professorat per configurar, carregar la clau i corregir.</li>
          <li>Informe de correcci√≥ a la pestanya ¬´Correcci√≥¬ª.</li>
        </ul>
        <p><strong>Important:</strong> aquesta aplicaci√≥ √©s una <strong>plantilla correctora</strong>. L'examen es lliura en paper i l'alumnat nom√©s introdueix les respostes a la web.</p>

        <h2>Requisits</h2>
        <ul>
          <li>Compte de Google (Drive i Apps Script).</li>
          <li>Una c√≤pia de la fulla del projecte amb pestanyes: <code>Config</code>, <code>Keys</code>, <code>Settings</code>, <code>Submissions</code> i <code>Correcci√≥</code>.</li>
        </ul>

        <h2>Passos r√†pids</h2>
        <ol>
          <li><strong>Copia</strong> la plantilla de la Fulla de C√†lcul.</li>
          <li><strong>Obre Apps Script</strong> des de Extensions ‚Üí Apps Script.</li>
          <li><strong>Publica</strong> la web: Implementar ‚Üí Nova implementaci√≥ ‚Üí Aplicaci√≥ web; ¬´Qualsevol amb l'enlla√ß¬ª.</li>
          <li><strong>Entra</strong> al panell del professorat amb el codi inicial <code>0000</code> i canvia'l.</li>
        </ol>

        <h2>Crear i configurar un examen</h2>
        <ol>
          <li>Des del panell, crea o selecciona un examen i defineix nom, preguntes, opcions (ABC/ABCDE), i horari si cal.</li>
          <li>Carrega la <strong>clau de respostes</strong> (seq√º√®ncia de lletres).</li>
          <li>Comparteix l'<strong>enlla√ß de l'alumnat</strong> (Classroom, Moodle o QR).</li>
          <li>Executa la <strong>correcci√≥</strong> per obtenir resultats a ¬´Correcci√≥¬ª.</li>
        </ol>

        <h2>Pestanyes del panell</h2>
        <ul>
          <li><strong>Resum</strong>: estat de l'examen, enlla√ßos i esborrat.</li>
          <li><strong>Configuraci√≥</strong>: par√†metres i mesures de seguretat.</li>
          <li><strong>Respostes</strong>: clau, criteris de qualificaci√≥ i informe.</li>
          <li><strong>Ajustaments</strong>: codi d'administraci√≥ i gesti√≥ de dades.</li>
        </ul>

        <h2>Llic√®ncies</h2>
        <ul>
          <li><strong>Codi</strong>: AGPL v3. Consulta <a href="../LICENSE.txt">LICENSE.txt</a>.</li>
          <li><strong>Continguts</strong>: CC BY-SA 4.0.</li>
        </ul>
      </section>

      <section class="lang" id="lang-es">
        <h2>¬øQu√© es?</h2>
        <p>Esta plantilla permite recoger respuestas de ex√°menes tipo test desde una p√°gina web y guardarlas autom√°ticamente en tu Hoja de C√°lculo de Google.</p>
        <ul>
          <li>Enlace para el alumnado (web app).</li>
          <li>Panel del profesorado para configurar, cargar la clave y corregir.</li>
          <li>Informe de correcci√≥n en la pesta√±a ¬´Correcci√≥¬ª.</li>
        </ul>
        <p><strong>Importante:</strong> esta aplicaci√≥n es una <strong>plantilla correctora</strong>. El examen se entrega en papel y el alumnado solo introduce sus respuestas en la web.</p>

        <h2>Requisitos</h2>
        <ul>
          <li>Cuenta de Google (Drive y Apps Script).</li>
          <li>Una copia de la hoja del proyecto con pesta√±as: <code>Config</code>, <code>Keys</code>, <code>Settings</code>, <code>Submissions</code> y <code>Correcci√≥</code>.</li>
        </ul>

        <h2>Pasos r√°pidos</h2>
        <ol>
          <li><strong>Copia</strong> la plantilla de la Hoja de C√°lculo.</li>
          <li><strong>Abre Apps Script</strong> desde Extensiones ‚Üí Apps Script.</li>
          <li><strong>Publica</strong> la web: Implementar ‚Üí Nueva implementaci√≥n ‚Üí Aplicaci√≥n web; ¬´Cualquiera con el enlace¬ª.</li>
          <li><strong>Entra</strong> al panel del profesorado con el c√≥digo inicial <code>0000</code> y c√°mbialo.</li>
        </ol>

        <h2>Crear y configurar un examen</h2>
        <ol>
          <li>Desde el panel, crea o selecciona un examen y define nombre, preguntas, opciones (ABC/ABCDE), y horario si procede.</li>
          <li>Carga la <strong>clave de respuestas</strong> (secuencia de letras).</li>
          <li>Comparte el <strong>enlace del alumnado</strong> (Classroom, Moodle o QR).</li>
          <li>Ejecuta la <strong>correcci√≥n</strong> para obtener resultados en ¬´Correcci√≥¬ª.</li>
        </ol>

        <h2>Pesta√±as del panel</h2>
        <ul>
          <li><strong>Resumen</strong>: estado del examen, enlaces y borrado.</li>
          <li><strong>Configuraci√≥n</strong>: par√°metros y medidas de seguridad.</li>
          <li><strong>Respuestas</strong>: clave, criterios de calificaci√≥n e informe.</li>
          <li><strong>Ajustes</strong>: c√≥digo de administraci√≥n y gesti√≥n de datos.</li>
        </ul>

        <h2>Licencias</h2>
        <ul>
          <li><strong>C√≥digo</strong>: AGPL v3. Consulta <a href="../LICENSE.txt">LICENSE.txt</a>.</li>
          <li><strong>Contenidos</strong>: CC BY-SA 4.0.</li>
        </ul>
      </section>

      <footer class="app-footer">
        <div id="footer-app" class="app-name">Plantilla correctora digital</div>
        <div id="footer-docs" class="docs-line">&nbsp;</div>
        <div id="footer-line1">&nbsp;</div>
        <div id="footer-line2" class="lic-line">&nbsp;</div>
      </footer>
    </div>

    <script>
      // ===== Idioma =====
      const langButtons = document.querySelectorAll('.switch .btn');
      const sections = {
        ca: document.getElementById('lang-ca'),
        es: document.getElementById('lang-es')
      };
      const I18N_FOOTER = {
        ca: {
          appName: 'Plantilla correctora digital',
          docs: '<a href="https://jjdeharo.github.io/pcd/" target="_blank" rel="noopener">Documentaci√≥</a>',
          line1: '<a href="https://bilateria.es" target="_blank" rel="noopener">¬© Juan Jos√© de Haro</a>',
          line2: 'Llic√®ncia del codi: <a href="https://github.com/jjdeharo/pcd/blob/main/LICENSE.txt" target="_blank" rel="noopener">AGPL v3</a> ¬∑ Contingut: <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a> <img class="cc" alt="CC BY-SA 4.0" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" />'
        },
        es: {
          appName: 'Plantilla correctora digital',
          docs: '<a href="https://jjdeharo.github.io/pcd/" target="_blank" rel="noopener">Documentaci√≥n</a>',
          line1: '<a href="https://bilateria.es" target="_blank" rel="noopener">¬© Juan Jos√© de Haro</a>',
          line2: 'Licencia del c√≥digo: <a href="https://github.com/jjdeharo/pcd/blob/main/LICENSE.txt" target="_blank" rel="noopener">AGPL v3</a> ¬∑ Contenido: <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a> <img class="cc" alt="CC BY-SA 4.0" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" />'
        }
      };
      function renderFooterDocs(currentLang) {
        try {
          const f = I18N_FOOTER[currentLang] || I18N_FOOTER.ca;
          const app = document.getElementById('footer-app');
          const docs = document.getElementById('footer-docs');
          const l1 = document.getElementById('footer-line1');
          const l2 = document.getElementById('footer-line2');
          if (app) app.textContent = f.appName || 'Plantilla correctora digital';
          if (docs) docs.innerHTML = f.docs || '';
          if (l1) l1.innerHTML = f.line1;
          if (l2) l2.innerHTML = f.line2;
        } catch (e) {}
      }
      function setLang(lang) {
        langButtons.forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
        Object.entries(sections).forEach(([k, el]) => el.classList.toggle('active', k === lang));
        document.documentElement.lang = lang;
        renderFooterDocs(lang);
      }
      langButtons.forEach(b => b.addEventListener('click', () => setLang(b.dataset.lang)));
      // Auto: seg√∫n navegador
      const nav = (navigator.language || 'ca').toLowerCase();
      setLang(nav.startsWith('es') ? 'es' : 'ca');

      // ===== Tema (claro/oscuro/auto) =====
      const THEME_KEY = 'pcd:docs:theme';
      const themeButtons = document.querySelectorAll('.theme-btn');
      function applyTheme(mode) {
        if (mode === 'light' || mode === 'dark') {
          document.documentElement.setAttribute('data-theme', mode);
        } else {
          document.documentElement.removeAttribute('data-theme');
        }
        themeButtons.forEach(b => b.classList.toggle('active', b.dataset.theme === mode));
      }
      function setTheme(mode) {
        const m = (mode === 'light' || mode === 'dark') ? mode : 'auto';
        try { localStorage.setItem(THEME_KEY, m); } catch (e) {}
        applyTheme(m);
      }
      themeButtons.forEach(b => b.addEventListener('click', () => setTheme(b.dataset.theme)));
      const savedTheme = (function(){ try { return localStorage.getItem(THEME_KEY) || 'auto'; } catch(e) { return 'auto'; } })();
      applyTheme(savedTheme);
    </script>
  </body>
  </html>
